{% extends "base.html" %}


{% block head %}
<title>Menambahkan Peminjaman Baru</title>
{% endblock %}


{% block body %}

<h1>Tambah Peminjaman</h1>

<script>
    var peminjamList = angular.module('peminjamList', []);
    peminjamList.config(function($interpolateProvider) {
  		$interpolateProvider.startSymbol('{[{');
  		$interpolateProvider.endSymbol('}]}');
	});
	peminjamList.controller("peminjamListController", function($scope) {
		
		$scope.peminjamListData = [];
		{% for peminjam in all_peminjam %}
		$scope.peminjamListData = $scope.peminjamListData.concat({
			id: "{{ peminjam.id }}",
			nama:"{{ peminjam.nama }}",
			deskripsi:"{{ peminjam.deskripsi }}",
			edit_link: "{% url 'peminjam:edit' peminjam.id %}",
			delete_link: "{% url 'peminjam:delete' peminjam.id %}"
		});
		{% endfor %}

		$scope.ruanganListData = [];
		{% for ruangan in all_ruangan %}
		$scope.ruanganListData = $scope.ruanganListData.concat({
			id: "{{ ruangan.id }}",
			nama:"{{ ruangan.nama }}",
			harga:"{{ ruangan.harga }}",
			deskripsi:"{{ ruangan.deskripsi }}",
			tipe:"{{ ruangan.tipe }}",
			edit_link: "{% url 'ruangan:edit' ruangan.id %}",
			delete_link: "{% url 'ruangan:delete' ruangan.id %}"
		});
		{% endfor %}

	});
</script>

<form enctype="multipart/form-data" action="{% url 'peminjaman:add' %}" method="post" id="peminjaman_form" novalidate ng-app="peminjamList" ng-controller="peminjamListController">
	{% csrf_token %}

	<div>
		<label for="id_peminjam">Peminjam:</label>
		<div>
			<select name="peminjam" required id="id_peminjam" ng-model="peminjamID">
				<option value="" selected>---------</option>							
				<option value="{[{ peminjamData.id }]}" ng-repeat = "peminjamData in peminjamListData">{[{ peminjamData.nama }]}</option>
			</select>

			<a id="change_id_peminjam"
			href="{[{ (peminjamListData | filter : {id:peminjamID} : true)[0].edit_link }]}"
			title="Change selected peminjam"><img src="/static/admin/img/icon-changelink.svg" alt="Change"/></a>
			<a id="add_id_peminjam"
			href="{% url 'peminjam:add' %}"
			title="Add another peminjam"><img src="/static/admin/img/icon-addlink.svg" alt="Add"/></a>

		</div>
	</div>

	<div>
		<label for="id_ruangan">Ruangan:</label>
		<div>
			<select name="ruangan" required id="id_ruangan" ng-model="ruanganID">
				<option value="" selected>---------</option>
				<option value="{[{ ruanganData.id }]}" ng-repeat = "ruanganData in ruanganListData">{[{ ruanganData.nama }]}</option>
			</select>

			<a id="change_id_ruangan"
			href="{[{ (ruanganListData | filter : {id:ruanganID} : true)[0].edit_link }]}"
			title="Change selected ruangan"><img src="/static/admin/img/icon-changelink.svg" alt="Change"/></a>
			<a id="add_id_ruangan"
			href="{% url 'ruangan:add' %}"
			title="Add another ruangan"><img src="/static/admin/img/icon-addlink.svg" alt="Add"/></a>

		</div>
	</div>

	<div>
		<label for="id_waktu_awal_0">Waktu awal:</label>
		<p class="datetime">
		Date: <input type="date" name="waktu_awal_0" id="id_waktu_awal_0" required />
		<br />
		Time: <input type="time" name="waktu_awal_1" id="id_waktu_awal_1" required />
		</p>
	</div>

	<div>
		<label for="id_waktu_akhir_0">Waktu akhir:</label>
		<p class="datetime">
		Date: <input type="date" name="waktu_akhir_0" id="id_waktu_akhir_0" required />
		<br />
		Time: <input type="time" name="waktu_akhir_1" id="id_waktu_akhir_1" required />
		</p>
	</div>

	<div>
		<label for="id_deskripsi">Deskripsi:</label>
		<textarea name="deskripsi" id="id_deskripsi" maxlength="1000"></textarea>
	</div>

	<ul>
	{% for error_item in error %}
	<li>{{ error_item }}</li>
	{% endfor %}

	{% for message_item in message %}
	<li>{{ message_item }}</li>
	{% endfor %}
	</ul>

	<div>
		<!--<input type="submit" value="Save" class="default" name="_save" />-->
		<!--<input type="submit" value="WAWA" >-->
		<input type="submit" value="Save" >
		<!--<input type="submit" value="Save and add another" name="_addanother" />-->
		<!--<input type="submit" value="Save and continue editing" name="_continue" />-->

	</div>
</form>

{% endblock %}
